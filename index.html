<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pizza Order</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1, h2 { text-align: center; }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    .product {
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      text-align: center;
      background: #f9f9f9;
      cursor: pointer;
    }
    .product img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 10px;
    }
    .totals {
      margin: 20px 0;
      font-weight: bold;
    }
    form {
      margin-top: 20px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    form input {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      padding: 8px;
    }
    button {
      padding: 10px 15px;
      background: #28a745;
      border: none;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #218838;
    }
  </style>
</head>
<body>
  <h1>Pizza Order</h1>

  <div class="grid" id="productsGrid"></div>

  <div class="totals">
    Total Quantity: <span id="totalQty">0</span><br>
    Total Price: ₦<span id="totalPrice">0</span>
  </div>

  <h2>Your Order</h2>
  <div id="orderSummary"></div>

  <h2>Your Details</h2>
  <form id="orderForm">
    <input type="text" id="firstName" placeholder="First Name" required>
    <input type="text" id="lastName" placeholder="Last Name" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <input type="text" id="childClass" placeholder="Child's Class" required>
    <button type="submit">Submit Order</button>
  </form>

  <script>
    const products = [
      { name: "Margherita", prices: { standard: 8600, large: 12200, xlarge: 17500 }, img: "images/margherita.png" },
      { name: "BBQ MeatBall", prices: { standard: 9600, large: 13400, xlarge: 18800 }, img: "images/bbq-meatball.png" },
      { name: "Pepperoni Supreme", prices: { standard: 9600, large: 13400, xlarge: 18800 }, img: "images/pepperoni-supreme.png" },
      { name: "Southern Style BBQ Chicken", prices: { standard: 10500, large: 13900, xlarge: 19900 }, img: "images/southern-style-bbq-chicken.png" },
      { name: "BBQ Chicken", prices: { standard: 10050, large: 13900, xlarge: 19900 }, img: "images/bbq-chicken.png" },
      { name: "Chicken Suya", prices: { standard: 10050, large: 13900, xlarge: 19900 }, img: "images/chicken-suya.png" },
      { name: "Chicken Supreme", prices: { standard: 10050, large: 13900, xlarge: 19900 }, img: "images/chicken-supreme.png" },
      { name: "BBQ Mega Meat", prices: { standard: 10500, large: 15400, xlarge: 21700 }, img: "images/bbq-mega-meat.png" },
      { name: "Shawarma", prices: { standard: 10500, large: 15400, xlarge: 21700 }, img: "images/shawarma.png" },
      { name: "Naija Fiesta", prices: { standard: 10500, large: 15400, xlarge: 21700 }, img: "images/naija-fiesta.png" },
      { name: "Cheesy Bread", prices: { standard: 4000 }, img: "images/cheesy-bread.png" },
      { name: "Cheesy Sauce Bread", prices: { standard: 5000 }, img: "images/cheesy-sauce-bread.png" },
      { name: "Cheesy Chicken Suya", prices: { standard: 5000 }, img: "images/cheesy-chicken-suya.png" },
      { name: "Cheesy Grilled Chicken", prices: { standard: 5000 }, img: "images/cheesy-grilled-chicken.png" },
      { name: "BBQ Sauce Calzone", prices: { standard: 8000 }, img: "images/bbq-sauce-calzone.png" },
      { name: "Pizza Sauce Calzone", prices: { standard: 8000 }, img: "images/pizza-sauce-calzone.png" },
      { name: "Suya Sauce Calzone", prices: { standard: 8000 }, img: "images/suya-sauce-calzone.png" },
      { name: "Roasted Chicken 2pcs", prices: { standard: 4000 }, img: "images/roasted-chicken-2pcs.png" },
      { name: "Roasted Chicken 5pcs", prices: { standard: 9000 }, img: "images/roasted-chicken-5pcs.png" },
      { name: "Jollof Rice with Roast Chicken", prices: { standard: 2500 }, img: "images/jollof-rice-with-roast-chicken.png" },
      { name: "Jollof Rice Only", prices: { standard: 1500 }, img: "images/jollof-rice-only.png" },
      { name: "Aquafina", prices: { standard: 800 }, img: "images/aquafina.png" },
      { name: "7uP", prices: { standard: 800 }, img: "images/7up.png" },
      { name: "Pepsi", prices: { standard: 800 }, img: "images/pepsi.png" },
      { name: "Mirinda Orange", prices: { standard: 800 }, img: "images/mirinda-orange.png" },
      { name: "Teem Bitter Lemon", prices: { standard: 800 }, img: "images/teem-bitter-lemon.png" },
      { name: "Chicken Wings 4pcs", prices: { standard: 4000 }, img: "images/chicken-wings-4pcs.png" },
      { name: "Chicken Wings 7pcs", prices: { standard: 7000 }, img: "images/chicken-wings-7pcs.png" },
      { name: "French Vanilla", prices: { standard: 9900 }, img: "images/french-vanilla.png" },
      { name: "Cake Batter", prices: { standard: 9900 }, img: "images/cake-batter.png" }
    ];

    let order = [];
    const productsGrid = document.getElementById("productsGrid");
    const totalQtyEl = document.getElementById("totalQty");
    const totalPriceEl = document.getElementById("totalPrice");
    const orderSummaryEl = document.getElementById("orderSummary");

    // Render products
    products.forEach((p, index) => {
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <img src="${p.img}" alt="${p.name}">
        <h3>${p.name}</h3>
        <p>${Object.entries(p.prices).map(([size, price]) => size + ": ₦" + price).join("<br>")}</p>
      `;
      div.onclick = () => addToOrder(p);
      productsGrid.appendChild(div);
    });

    function addToOrder(product) {
      let size = "standard";
      if (product.prices.large || product.prices.xlarge) {
        size = prompt(`Enter size for ${product.name} (standard, large, xlarge):`, "standard");
        if (!size || !product.prices[size]) return;
      }
      const qty = parseInt(prompt("Enter quantity:", "1"));
      if (!qty || qty <= 0) return;

      order.push({ ...product, size, qty, price: product.prices[size] });
      updateSummary();
    }

    function updateSummary() {
      let totalQty = 0;
      let totalPrice = 0;
      orderSummaryEl.innerHTML = "";
      order.forEach(item => {
        totalQty += item.qty;
        totalPrice += item.qty * item.price;
        orderSummaryEl.innerHTML += `<p>${item.qty} × ${item.name} (${item.size}) = ₦${item.qty * item.price}</p>`;
      });
      totalQtyEl.textContent = totalQty;
      totalPriceEl.textContent = totalPrice;
    }

    document.getElementById("orderForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        firstName: document.getElementById("firstName").value,
        lastName: document.getElementById("lastName").value,
        phone: document.getElementById("phone").value,
        childClass: document.getElementById("childClass").value,
        order: JSON.stringify(order),
        totalQty: totalQtyEl.textContent,
        totalPrice: totalPriceEl.textContent
      };

      try {
        const res = await fetch("YOUR_GOOGLE_SCRIPT_WEB_APP_URL", {
          method: "POST",
          body: JSON.stringify(data),
          headers: { "Content-Type": "application/json" }
        });
        if (res.ok) {
          alert("Order submitted successfully!");
        } else {
          alert("Error submitting order.");
        }
      } catch (err) {
        alert("Failed to connect to server: " + err);
      }
    });
  </script>
</body>
</html>

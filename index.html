<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pizza Order</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
    .card { background: white; border-radius: 8px; padding: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .card img { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; }
    .popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
    .popup-content { background: white; padding: 20px; border-radius: 10px; max-width: 600px; width: 90%; display: flex; gap: 20px; }
    .popup img { width: 200px; border-radius: 8px; }
    .popup button { display: block; margin: 8px 0; width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; }
    .popup button:hover { background: #f4f4f4; }
    #summary { display: none; margin-top: 20px; }
    #summary table { border-collapse: collapse; width: 100%; }
    #summary td, #summary th { border: 1px solid #ccc; padding: 8px; }
    .form { margin-top: 30px; }
    .form input { display: block; margin: 10px 0; padding: 8px; width: 100%; }
    .form button { padding: 10px 15px; }
  </style>
</head>
<body>
  <h1>Welcome!</h1>

  <div class="grid" id="productGrid"></div>

  <div class="form">
    <h3>Enter Your Details</h3>
    <input type="text" id="name" placeholder="Name" required />
    <input type="text" id="surname" placeholder="Surname" required />
    <input type="text" id="phone" placeholder="Phone Number" required />
    <input type="text" id="childClass" placeholder="Child's Class" required />
    <button onclick="submitOrder()">Submit Order</button>
  </div>

  <div id="summary">
    <h2>Order Summary</h2>
    <table>
      <tr><th>Name</th><td id="sName"></td></tr>
      <tr><th>Surname</th><td id="sSurname"></td></tr>
      <tr><th>Phone</th><td id="sPhone"></td></tr>
      <tr><th>Child Class</th><td id="sChild"></td></tr>
      <tr><th>Order Quantity</th><td id="sQty"></td></tr>
      <tr><th>Total</th><td id="sTotal"></td></tr>
      <tr><th>Amount to Pay</th><td id="sAmount"></td></tr>
    </table>
  </div>

  <!-- Popup -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <img id="popupImg" src="" alt="">
      <div>
        <h2 id="popupName"></h2>
        <div id="popupOptions"></div>
        <button onclick="closePopup()">Close</button>
      </div>
    </div>
  </div>

<script>
const products = [
  {name:"Margherita", img:"Margherita.PNG", sizes:{Medium:8600,Large:12200,"X-Large":17500}},
  {name:"BBQ Meatball", img:"BBQ-MeatBall.PNG", sizes:{Medium:9600,Large:13400,"X-Large":18800}},
  {name:"Pepperoni Supreme", img:"Pepperoni-Supreme.PNG", sizes:{Medium:9600,Large:13400,"X-Large":18800}},
  {name:"Southern Style BBQ Chicken", img:"Southern-Style-BBQ-Chicken.PNG", sizes:{Medium:10500,Large:13900,"X-Large":19900}},
  {name:"BBQ Chicken", img:"BBQ-Chicken.PNG", sizes:{Medium:10050,Large:13900,"X-Large":19900}},
  {name:"Chicken Suya", img:"Chicken-Suya.PNG", sizes:{Medium:10050,Large:13900,"X-Large":19900}},
  {name:"Chicken Supreme", img:"Chicken-Supreme.PNG", sizes:{Medium:10050,Large:13900,"X-Large":19900}},
  {name:"BBQ Mega Meat", img:"BBQ-Mega-Meat.PNG", sizes:{Medium:10500,Large:15400,"X-Large":21700}},
  {name:"Shawarma", img:"Shawarma.PNG", sizes:{Medium:10500,Large:15400,"X-Large":21700}},
  {name:"Naija Fiesta", img:"Naija-Fiesta.PNG", sizes:{Medium:10500,Large:15400,"X-Large":21700}},
  {name:"Cheesy Bread", img:"Cheesy-Bread.PNG", sizes:{Standard:4000}},
  {name:"Cheesy Sausage Bread", img:"Cheesy-Sausage-Bread.PNG", sizes:{Standard:5000}},
  {name:"Cheesy Chicken Suya", img:"Cheesy-Chicken-Suya.PNG", sizes:{Standard:5000}},
  {name:"Cheesy Grilled Chicken", img:"Cheesy-Grilled-Chicken.PNG", sizes:{Standard:5000}},
  {name:"BBQ Sauce Calzone", img:"BBQ-Sauce-Calzone.PNG", sizes:{Standard:8000}},
  {name:"Pizza Sauce Calzone", img:"Pizza-Sauce-Calzone.PNG", sizes:{Standard:8000}},
  {name:"Suya Sauce Calzone", img:"Suya-Sauce-Calzone.PNG", sizes:{Standard:8000}},
  {name:"Roasted Chicken 2pcs", img:"Roasted-Chicken-2pcs.PNG", sizes:{Standard:4000}},
  {name:"Roasted Chicken 5pcs", img:"Roasted-Chicken-5pcs.PNG", sizes:{Standard:9000}},
  {name:"Jollof Rice with Roast Chicken", img:"Jollof-Rice-with-Roast-Chicken.PNG", sizes:{Standard:2500}},
  {name:"Jollof Rice Only", img:"Jollof-Rice-Only.PNG", sizes:{Standard:1500}},
  {name:"Aquafina", img:"Aquafina.PNG", sizes:{Standard:800}},
  {name:"7up", img:"7uP.PNG", sizes:{Standard:800}},
  {name:"Pepsi", img:"Pepsi.PNG", sizes:{Standard:800}},
  {name:"Mirinda Orange", img:"Mirinda-Orange.PNG", sizes:{Standard:800}},
  {name:"Teem Bitter Lemon", img:"Teem-Bitter-Lemon.PNG", sizes:{Standard:800}},
  {name:"Chicken Wings 4pcs", img:"Chicken-Wings-4pcs.PNG", sizes:{Standard:4000}},
  {name:"Chicken Wings 7pcs", img:"Chicken-Wings-7pcs.PNG", sizes:{Standard:7000}},
  {name:"French Vanilla", img:"French-Vanilla.PNG", sizes:{Standard:9900}},
  {name:"Cake Batter", img:"Cake-Batter.PNG", sizes:{Standard:9900}},
];

let cart = [];

const grid = document.getElementById("productGrid");
products.forEach((p,i)=>{
  const card = document.createElement("div");
  card.className="card";
  card.innerHTML = `
    <img src="${p.img}" alt="${p.name}">
    <h4>${p.name}</h4>
    <p>₦${Object.values(p.sizes)[0].toLocaleString()}</p>
    <button onclick="openPopup(${i})">Select</button>
  `;
  grid.appendChild(card);
});

function openPopup(i){
  const p = products[i];
  document.getElementById("popupName").innerText = p.name;
  document.getElementById("popupImg").src = p.img;
  const opts = document.getElementById("popupOptions");
  opts.innerHTML="";
  for (let [size,price] of Object.entries(p.sizes)){
    const btn = document.createElement("button");
    btn.innerText = `${size} ₦${price.toLocaleString()}`;
    btn.onclick=()=>{ 
      cart.push({name:p.name,size,price});
      alert(p.name+" ("+size+") added!");
      closePopup();
    };
    opts.appendChild(btn);
  }
  document.getElementById("popup").style.display="flex";
}

function closePopup(){ document.getElementById("popup").style.display="none"; }

async function submitOrder(){
  const name=document.getElementById("name").value;
  const surname=document.getElementById("surname").value;
  const phone=document.getElementById("phone").value;
  const childClass=document.getElementById("childClass").value;
  const qty=cart.length;
  const total=cart.reduce((a,b)=>a+b.price,0);

  const order={name,surname,phone,childClass,cart,qty,total};

  try{
    const res=await fetch("https://script.google.com/macros/s/AKfycby5THVFsizWwJaIr2p_NUzwLzP9_TOW7NwqCADD8B5a0eoe-ouUk6Sbk5nzw9bfqNxu/exec",{
      method:"POST",
      body:JSON.stringify(order),
    });
    if(res.ok){
      document.getElementById("sName").innerText=name;
      document.getElementById("sSurname").innerText=surname;
      document.getElementById("sPhone").innerText=phone;
      document.getElementById("sChild").innerText=childClass;
      document.getElementById("sQty").innerText=qty;
      document.getElementById("sTotal").innerText="₦"+total.toLocaleString();
      document.getElementById("sAmount").innerText="₦"+total.toLocaleString();
      document.getElementById("summary").style.display="block";
    } else { alert("Error submitting order."); }
  } catch(e){
    alert("Error submitting order.");
  }
}
</script>
</body>
</html>
